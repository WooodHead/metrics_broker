version: "3.5"

services:
  metrics_broker_build:
    build: ./
    container_name: "metrics_broker_build"
    volumes:
      - dist:/usr/src/app/dist
    env_file:
      - ./var.env
    networks:
      statistics_collection:
        ipv4_address: 172.21.0.6

  metrics_broker:
    image: nginx
    container_name: "metrics_broker"
    restart: unless-stopped
    volumes:
      - dist:/usr/share/nginx/html:ro
    networks:
      statistics_collection:
        ipv4_address: 172.21.0.5

volumes:
  dist:

networks:
  statistics_collection:
    external: true
    name: statistics
